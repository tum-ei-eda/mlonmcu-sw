PROJECT(openasip-crc)

SET(OPENASIP_CRC_MODE
    "both"
    CACHE STRING "Specify which benchmark to run."
)
SET_PROPERTY(CACHE OPENASIP_CRC_MODE PROPERTY STRINGS both slow fast)

COMMON_ADD_LIBRARY(${PROJECT_NAME} STATIC crc.c main.c)
TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME} PUBLIC .)

IF(${OPENASIP_CRC_MODE} STREQUAL "both")
    TARGET_COMPILE_DEFINITIONS(${PROJECT_NAME} PUBLIC SLOW=1 FAST=1)
ELSEIF(${OPENASIP_CRC_MODE} STREQUAL "slow")
    TARGET_COMPILE_DEFINITIONS(${PROJECT_NAME} PUBLIC SLOW=1 FAST=0)
ELSEIF(${OPENASIP_CRC_MODE} STREQUAL "fast")
    TARGET_COMPILE_DEFINITIONS(${PROJECT_NAME} PUBLIC SLOW=0 FAST=1)
ENDIF()
